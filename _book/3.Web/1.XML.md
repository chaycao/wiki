# XML

## XML的生成解析方法

### DOM

DOM（Document Object MOdel）是用与平台和语言无关的方式表示XML文档的官方W3C标准。DOM是以层次结构组织的节点或信息片断的集合。这个层次结构允许开发人员在树中寻找特定信息。分析该结构通常需要加载整个文档和构造层次结构，然后才能做任何工作。由于它是基于信息层次的，因而DOM被认为是基于树或基于对象的。

**优点：**

- 允许应用程序对数据和结构做出更改。      
- 访问是双向的，可以在任何时候在树中上下导航，获取和操作任意部分的数据。
- 编程容易

**缺点：**

- 通常需要加载整个XML文档来构造层次结构，消耗资源大。

**使用场景：**

- XML文档需要频繁改变

### SAX

SAX采用事件模型，在解析XML文档时可以促发一系列事件，当发现给定 tag 时，可以激活一个回调函数，告诉该方法 tag 已找到。SAX对内存的要求通常会比较低，因为它让开发人员自己来决定所要处理的tag.特别是当开发人员只需要处理文档中所包含的部分数据时，SAX这种扩展能力得到了更好的体现。但用SAX解析器的时候编码工作会比较困难，而且很难同时访问同一个文档中的多处不同数据。

**优点：**

- 不需要等待所有数据都被处理，分析就能立即开始。
- 只在读取数据时检查数据，不需要保存在内存中。
- 可以在某个条件得到满足时停止解析，不必解析整个文档。
- 效率和性能较高，能解析大于系统内存的文档。

**缺点：**

- 需要应用程序自己负责TAG的处理逻辑（例如维护父/子关系等），文档越复杂程序就越复杂。    
- 单向导航，无法定位文档层次，很难同时访问同一文档的不同部分数据，不支持XPath。

### JDOM

JDOM（Java-based Document Object Model）与DOM主要有两方面不同。首先，JDOM仅使用具体类而不使用接口。这在某些方面简化了API，但是也限制了灵活性。第二，API大量使用了Collections类，简化了那些已经熟悉这些类的Java开发者的使用。

JDOM自身不包含解析器。它通常使用SAX2解析器来解析和验证输入XML文档（尽管它还可以将以前构造的DOM表示作为输入）。它包含一些转换器以将JDOM表示输出成SAX2事件流、DOM模型或XML文本文档。JDOM是在Apache许可证变体下发布的开放源码。

**优点：**

- 使用具体类而不是接口，简化了DOM的API。    
- 大量使用了Java集合类，方便了Java开发人员。

**缺点：**

- 没有较好的灵活性。     
- 性能较差。

### DOM4J

DOM4J（Document Object Model for Java）合并了许多超出基本XML文档表示的功能，包括集成的XPath支持、XML Schema支持以及用于大文档或流化文档的基于事件的处理。它还提供了构建文档表示的选项，它通过DOM4J API和标准DOM接口具有并行访问功能。

优点：

- 大量使用了Java集合类，方便Java开发人员，同时提供一些提高性能的替代方法。

- 支持XPath。

- 有很好的性能。

缺点：

- 大量使用了接口，API较为复杂。

### 比较

1. DOM4J 性能最好，若不考虑可移植性，则推荐采用
2. JDOM、DOM 在性能上表现不佳，但可移植
3. SAX 性能表现较好

如果XML文档较大且不考虑移植性问题建议采用DOM4J；

如果XML文档较小则建议采用JDOM；

如果需要及时处理而不需要保存数据则考虑SAX。